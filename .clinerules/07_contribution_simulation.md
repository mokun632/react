# コントリビューションシミュレーションに関するルール

このドキュメントは、学習目的で React コードベースへの変更をシミュレーションする際のガイドラインを定めます。実際のコントリビューションではなく、「もし貢献するとしたら」という仮想的な変更を検討・実験するための枠組みを提供します。

## 1. シミュレーションの目的

*   **学習促進:** React の内部実装をより深く理解するため、実際にコードを変更する場合のアプローチを検討する
*   **思考実験:** 特定の問題に対する修正案や機能追加案を検討し、その影響範囲や実現可能性を評価する
*   **アルゴリズム理解:** 既存のアルゴリズムを改良・最適化したり、代替手法を検討したりすることで、現状の実装の意図を理解する

## 2. シミュレーションの種類

*   **バグ修正シミュレーション**
    *   既知の問題（GitHub Issues など）に対する修正案の検討
    *   コードの潜在的な問題点や脆弱性に対する解決策の提案
    *   エッジケースへの対応方法の検討

*   **機能拡張シミュレーション**
    *   既存の API やコンポーネントの機能拡張
    *   新しいフックや機能の追加
    *   既存の実装の最適化や代替アプローチの検討

*   **リファクタリングシミュレーション**
    *   コードの可読性向上のための構造変更
    *   パフォーマンス最適化のための実装変更
    *   メンテナンス性向上のためのモジュール再編成

## 3. シミュレーションのステップ

1. **問題・目標の明確化**
   *   取り組む問題や拡張したい機能を正確に定義
   *   変更の目的とその価値を明確にする
   *   成功基準（バグが修正される条件、機能が動作する条件など）を設定

2. **現状の理解**
   *   関連するコードの詳細な分析
   *   設計の意図と制約の理解
   *   既存のテストケースの確認と理解

3. **変更案の設計**
   *   複数の実装アプローチの検討
   *   各アプローチのメリット・デメリットの評価
   *   最適なアプローチの選択と詳細設計

4. **仮想的な実装**
   *   変更が必要なファイルと箇所の特定
   *   具体的なコード変更の提案（Diff 形式で）
   *   テストケースの追加・修正案

5. **影響分析**
   *   変更がコードベースの他の部分に与える影響の評価
   *   互換性への影響検討
   *   潜在的な副作用の予測

6. **検証シミュレーション**
   *   変更がどのようにテストされるべきかの検討
   *   想定されるテスト結果の予測
   *   エッジケースや特殊条件下での動作予測

## 4. シミュレーション実施のガイドライン

*   **非破壊的アプローチ**
    *   実際のコードベースを直接変更せず、変更案を分離して管理
    *   オリジナルのコードを常に参照可能な状態に保つ
    *   実験的な変更は必ず学習用の分離環境またはスクラッチパッドで行う

*   **段階的アプローチ**
    *   大きな変更を小さな、検証可能なステップに分解
    *   各ステップが独立して評価できるようにする
    *   段階的な変更の累積的な効果を把握する

*   **根拠に基づく検討**
    *   変更の各部分に明確な根拠を持たせる
    *   「なぜこの変更が必要か」「なぜこのアプローチが適切か」を常に説明できるようにする
    *   推測や仮定に基づく変更は避け、コードや文書から根拠を示す

## 5. Cline への指示

*   コントリビューションシミュレーションの依頼を受けた場合:
    *   問題や目標の明確化を支援
    *   既存の実装の詳細な説明を提供
    *   変更案の設計や実装に対するフィードバックの提供

*   実装案の提示:
    *   具体的なコード変更を Diff 形式で提示
    *   各変更の目的と効果の説明
    *   変更に関連する既存コードの文脈提供

*   シミュレーション結果の分析:
    *   変更がどのような効果をもたらすかの予測
    *   起こりうる課題や副作用の指摘
    *   実際のコントリビューションに向けた改善点の提案

## 6. 注意点

*   シミュレーションは学習目的であり、実際に PR を送る前の練習段階として位置づける
*   React の設計原則やコーディング規約に沿った変更を心がける
*   実際のコントリビューションを検討する場合は、Meta の貢献ガイドラインに従うことが重要
*   シミュレーションで検討した変更案が、必ずしも React コアチームの設計方針と一致するとは限らない
*   シミュレーションで得た知見は、自分のプロジェクトやライブラリの開発にも応用可能
