# React コードベース学習のための Cline ルール

## 1. 目的

この `.clinerules` セットは、React の巨大なコードベースの内部実装を効率的に学習することを目的としています。AI エージェント Cline と協力し、コードの理解、関連箇所の特定、デバッグなどを支援してもらうためのガイドラインを定めます。

## 2. Cline (AI エージェント) に期待する役割

*   **コード解説:** 特定のファイル、関数、クラス、概念について、その役割や動作を説明する。
*   **関連コード検索:** ある機能や概念に関連する他のコード箇所を特定し、提示する。(`search_files`, `list_code_definition_names` などを活用)
*   **依存関係の追跡:** 関数呼び出しやモジュール間の依存関係を追跡し、可視化する (Mermaid など)。
*   **図解による説明:** 複雑な概念や処理フローを理解しやすくするために、Mermaid などの図を積極的に活用して説明する。
*   **デバッグ補助:** エラーメッセージの解釈、スタックトレースの分析、特定条件下の動作確認などを支援する。
*   **概念の説明:** React のコア概念 (Fiber, Reconciliation, Hooks など) がコード上でどのように実装されているかを説明する。
*   **テストコードとの関連付け:** 実装コードと対応するテストコードを結びつける。
*   **正確なコード参照:** 関数や重要な変数に言及する際は、それが**定義されているファイルパスと行番号**を `(ファイルパス:行番号)` の形式で明記し、コードジャンプを容易にする。 (例: `createRoot (packages/react-dom/src/client/ReactDOMRoot.js:165)`)

## 3. 基本原則

*   **学習優先:** すべての操作は、React の内部実装を理解するという学習目的のために行います。
*   **非破壊的操作:** 原則として、コードベースを直接変更する操作 (特に `write_to_file` や `replace_in_file` による大規模な書き換え) は慎重に行い、学習目的の範囲に留めます。変更を試す場合は `07_contribution_simulation.md` のルールに従います。
*   **段階的アプローチ:** 巨大なコードベースのため、一度にすべてを理解しようとせず、特定のパッケージや機能に焦点を当てて段階的に学習を進めます。
*   **ツールの適切な利用:** Cline が持つツール (`read_file`, `search_files`, `list_code_definition_names`, `execute_command` など) を目的に応じて適切に使い分けます。
*   **対話による明確化:** 不明な点や曖昧な点は、`ask_followup_question` を通じて積極的に質問し、認識を合わせます。
*   **段階的なログ記録:** 分析や調査の結果は、まずチャットで詳細に報告し、ユーザーの確認を得ます。その後、一区切りついた段階で関連する学習ログファイルにまとめて記録します。これにより、手戻りを減らし、ログのまとまりを保ちます。
*   **複雑な質問への対応:** 回答に広範囲な事前知識や複数ファイルの横断的な理解が必要と判断される場合、その旨を事前に警告し、学習を一旦後回しにするか確認します。

## 4. ルール構成

この `.clinerules` は、以下のファイル群で構成されています。

*   `00_overview.md`: (このファイル) 全体の目的と概要。
*   `01_core_concepts.md`: React のコア概念に関するルール。
*   `02_package_specific/`: 主要パッケージ (`react`, `react-dom`, `react-reconciler` など) 固有のルール。
*   `03_compiler_rules.md`: React Compiler (`compiler/` ディレクトリ) に関するルール。
*   `04_testing_guidelines.md`: テストコード (`fixtures/` など) の分析や実行に関するルール。
*   `05_debugging_workflows.md`: デバッグ時の AI 活用方法や注意点。
*   `06_code_analysis.md`: コードリーディングやリファクタリング支援に関するルール。
*   `07_contribution_simulation.md`: (オプション) コード変更をシミュレーションする場合のルール。

## 5. 利用方法

*   学習したい内容や疑問点を Cline に具体的に伝えてください。
*   特定のファイルや関数について知りたい場合は、パスを指定してください。
*   Cline からの提案や質問には、適宜フィードバックをお願いします。
*   必要に応じて、特定のルールファイルを参照するように Cline に指示してください (例: 「`01_core_concepts.md` の Fiber に関するルールを考慮して、このコードを説明して」)。

---
*このドキュメントは、学習の進捗や新たな発見に応じて、Cline と協力して更新していきます。*
